context 
{
	context: x86 Real Mode - Teletype HelloWorld;
	LTP    : Boostrap;
	layer  : Boostrap;

	dependencies :
		// Library provided by Boostrap LTP.
		x86 : ISA.x86;
		BIOS;
	;

	origin		: ISA.Mem_BootSector_Start; 
	entrypoint	: start;
}


proc start exe :
// Expose ISA symbols
expose x86;
expose BIOS;

	label	textMode_ClearScreen:
		mov(AH, Video.SetMode);
		mov(AL, VideoMode._80x25);
		interrupt(VideoService)

	label	teletype_HelloWorld:
		mov(AH, Video.TeleType;
		mov(AL, 'H');
		interrupt(VideoService)
		mov(AL, 'e')
		interrupt(VideoService)
		mov(AL, 'l')
		interrupt(VideoService)
		mov(AL, 'l')
		interrupt(VideoService)
		mov(AL, 'o')
		interrupt(VideoService)
		mov(AL, ' ')
		interrupt(VideoService)
		mov(AL, ' ')
		interrupt(VideoService)
		mov(AL, ' ')
		interrupt(VideoService)
		mov(AL, ' ')
		interrupt(VideoService)
		mov(AL, ' ')
		interrupt(VideoService)
		mov(AL, ' ')
		interrupt(VideoService)

	label	hang:
		goto hang;
;

// Pad 512 bytes of memory.
tt exe 
{
	loop :
		if 	512 < (510 - context.maddress + start.maddress) : break;

		gen hex : 0;
	;

	x86.MBA_Signature;
}